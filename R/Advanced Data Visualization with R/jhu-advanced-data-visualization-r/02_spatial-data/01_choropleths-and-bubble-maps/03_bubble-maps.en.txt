Another type of map
you may want to make is what is
called a bubble map, where different points
vary in size or color based on some set
of values in your data. For instance, let's say that you wanted to create a map that included some of the
largest cities in Japan, and you wanted to
vary the size of the marks by population and the color of the marks by some other categorical or
quantitative variable. Let's go ahead and
make this using the Maps Package and a ggplot. Open up a new R script and we'll load the
required packages. Let's also make a blank map of Japan using the techniques
we've learned before. The maps package has data on
many cities built into it, and we can access that using
the following line of code. Saved list of cities
to an object. If you look at the object, we see that it is a list of
many cities in Japan and their corresponding
populations and their latitude and
longitude coordinates. Now we first map all
the cities in Japan. To the blank map of Japan, we add a geom_point function, and when we make a
bubble plot like this. We don't need to merge the point data into
the map DataFrame. Instead, we specify
the data specifically, once again in the
geom_point function, and then we specify
longitude and latitude. Although we use a
group command in the original aesthetic mapping, we don't need one here, so we just set it to null. Just for some variety,
we are going to set the color here to red. Recall here that we
don't set the color in the original ggplot function or set it to a value in the data, in the aesthetics function. Because for now, we don't want
the color of the points to vary in conjunction with
any value in the data. We just unconditionally want
all the points to be red. When we plot this,
we see that we now have points for all
the cities in Japan, at least the ones that
we have data for. There are a lot of points
in the map though, so we might want a smaller
subset of cities to display. We can filter the cities to
select only those cities in Japan with populations
above 500,000. Population is contained
in the 'pop column', so filter for greater than 500,000 in that
column and map again. If you want to add more
information to these points, we can change the size
and color of the points, mapping them to
features of the data. Revisiting the ggplot function, we set the size of the points in the aesthetics function of the geom_point function to pop. It's not dramatic, but you can see that the size of the points now varies based on
the population size. What if we wanted to
vary the size of dots by population and the color of the dots by some
other criteria. Let's say we wanted
to vary the color by some qualitative or
categorical variable. Again, for practice, we'll
just use the letters here as stand-ins for
qualitative variables, and I'll create a string of letters and attach
them to the data-set. With a few modifications to the ggplot function that
should look familiar, we see that color and
size now are associated with the categorical variable
and the size of the city. Note especially here that
I'm setting the color within the aesthetic function
because I want the color mapped to a
feature of the data, whereas before color
was set outside of the aesthetic function
because I just wanted every point
to be one color. Now we just do some quick
practice polishing, and we're done with the figure varying both size and
color of the cities.